<!DOCTYPE html>
<html>
    <head>
        <script src="https://aframe.io/releases/0.5.0/aframe.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
        <script src="https://rawgit.com/protyze/aframe-alongpath-component/master/dist/aframe-alongpath-component.min.js"></script>
    </head>

    <body>
        <a-scene inspector="url: https://aframe.io/releases/0.3.0/aframe-inspector.min.js">

          <a-entity position="0 1.6 0" camera id="camera" look-controls="enabled: true">
            <a-cursor color="aqua"></a-cursor>
            <a-box id="hold" visible="false" color="#990000" height="2" width="2" depth="2" position="2 -1.5 -0.3" scale="1 1 1"></a-box>
          </a-entity>

          <a-assets>
            <a-asset-item id="cave-obj" src="models/crystalenv/cave.obj"></a-asset-item>
            <a-asset-item id="cave-mtl" src="models/crystalenv/cave.mtl"></a-asset-item>
            <a-asset-item id='lion-obj' src='models/lion/lion-cub.obj'></a-asset-item>
            <a-asset-item id='lion-mtl' src='models/lion/lion-cub.mtl'></a-asset-item>
            <a-asset-item id='river-obj' src='models/river/river.obj'></a-asset-item>
            <a-asset-item id='river-mtl' src='models/river/river.mtl'></a-asset-item>
            <a-asset-item id='gem-obj' src='models/gem/gem.obj'></a-asset-item>
            <a-asset-item id='gem-mtl' src='models/gem/gem.mtl'></a-asset-item>
            <a-asset-item id='quartz-obj' src='models/quartz/quartz.obj'></a-asset-item>
            <a-asset-item id='quartz-mtl' src='models/quartz/quartz.mtl'></a-asset-item>
          </a-assets>

          <!-- // sky, models -->
          <a-sky id='clouds' autoplay loop='true' rotation='0 280 0' src="models/clouds.mp4"></a-sky>
          <a-obj-model id="cave" src="#cave-obj" mtl="#cave-mtl" position="5 -7 4" scale="1 1 1" rotation="0 225 0"></a-obj-model>
          <a-obj-model id='lion' src="#lion-obj" mtl="#lion-mtl" rotation="180 20 180" scale=".08 .08 .08" position="-3 1.3 -1.3"></a-obj-model>
          <a-obj-model id="river-obj" src="#river-obj" color="#33ccff" position="10.82 -4.5 11.53" scale=".1 .1 .1" rotation="0 130 0" alongpath="path:10,-4.5,11.45 10.4,-4.5,11.49; closed:true; dur:2500; inspector:false; loop:true" repeat="indefinite"></a-obj-model>
          <a-obj-model class='gem' src="#gem-obj" mtl="#gem-mtl" rotation="0 0 0" scale="2 2 2" position="-1 .25 -1"></a-obj-model>
          <a-obj-model class='gem' src="#gem-obj" mtl="#gem-mtl" rotation="20 10 0" scale="2.2 2.2 2.2" position="-1.8 .25 -.75"></a-obj-model>
          <a-obj-model class='gem' src="#gem-obj" mtl="#gem-mtl" rotation="-20 -10 0" scale="2.2 2.2 2.2" position="-.75 .25 -.60"></a-obj-model>
          <a-obj-model id="ruby" src="#quartz-obj" mtl="#quartz-mtl" rotation="-20 -10 0" scale=".2 .2 .2" position="-14 -1 5.5" visible="false"></a-obj-model>

          <!-- // liquid examples -->
          <a-sphere class="liquid" color="#33ff96" radius="0.25" position="7 1.5 -11"
          alongpath="path:5,1.5,-5 3,1.5,-2 6,1.5,-7; closed:true; dur:6500; delay:1000; inspector:false; loop:true" repeat="indefinite">
          </a-sphere>
          <a-sphere class="liquid" color="#80ffbd" radius=".15" position="7 1 -10"
          alongpath="path:5,1,-5 3,1,-1 6,1,-7; closed:true; dur:5500; delay:1000; inspector:false; loop:true" repeat="indefinite">
          </a-sphere>
          <a-sphere class="liquid" color="#4dffa3" radius=".15" position="7 2 -9"
          alongpath="path:5,2,-5 3,2,0 6,2,-7; closed:true; dur:6000; delay:1000; inspector:false; loop:true" repeat="indefinite">
          </a-sphere>
          <!-- // solid examples -->
          <a-torus-knot class="solid" src="img/rainbow.jpg" position="-30 .75 -36" arc="180" p="2" q="7" radius="5" radius-tubular="0.1">
          </a-torus-knot>
          <a-torus-knot class="solid" src="img/rainbow.jpg" position="-20 3 -27" arc="180" p="2" q="7" radius="5" radius-tubular="0.1" rotation="0 45 0">
          </a-torus-knot>
          <a-torus-knot class="solid" src="img/rainbow.jpg" position="-21 6 -30" arc="180" p="2" q="7" radius="5" radius-tubular="0.1" rotation="0 0 90">
          </a-torus-knot>
          <!-- // gas examples -->
          <a-ring class="gas" src="img/gold.jpg" position="0 .5 -20" rotation="0 45 45" scale=".5 .5 .5">
            <a-animation attribute="position" to="0 7 -20" direction="alternate" dur="250"
              repeat="indefinite"></a-animation>
          </a-ring>
          <a-ring class="gas" src="img/gold.jpg" position="2 2 -20" rotation="0 45 45" scale=".5 .5 .5">
            <a-animation attribute="position" to="-2 2 -20" direction="alternate" dur="250"
              repeat="indefinite"></a-animation>
          </a-ring>
          <a-ring class="gas" src="img/gold.jpg" position="-2 2 -20" rotation="0 45 45" scale=".5 .5 .5">
            <a-animation attribute="position" to="2 .5 -20" direction="alternate" dur="250"
              repeat="indefinite"></a-animation>
          </a-ring>
          <!-- // states of matter text -->
          <a-text id="text-1" class="matter-data" font="exo2bold" align="center" width="2" value="Hey!\n Isn't this world strange?\n There are so many states of matter here!" color="white"
          position="-20 2 0" scale="7 7 7" wrap-count="20" rotation="0 130 3.2" visible="false"> </a-text>
          <a-text id="text-2" class="matter-data" font="exo2bold" align="center" width="2" value="Look down...\n those blue gems are SOLID, their particles stay very still.\n Look up...\n those fluffy clouds are GAS, their particles move very fast!\n Look behind you...\n that river is LIQUID, its particles move, only much slower than a gas.\n" color="white"
          position="-20 3.5 0" scale="7 7 7" wrap-count="25" rotation="0 130 3.2" visible="false"> </a-text>
          <a-text id="text-3" class="matter-data" font="exo2bold" align="center" width="2" value="There are 3 sets of weird objects to my right:\n Can you tell which acts like a GAS?\n Give the red crystal to the gas object to show us the portal outta here!" color="white"
          position="-20 2 0" scale="7 7 7" wrap-count="25" rotation="0 130 3.2" visible="false"> </a-text>

          <!-- // portal to next level -->
          <a-sphere id='portal' src='models/portal.png' visible="false" position="2 1.8 -4" radius="0.5" scale="0.1 0.1 0.1">
            <a-animation
                attribute="rotation"
                 dur="500"
                 from="0 0 0"
                 to="0 360 0"
                 repeat="indefinite"
                 easing="linear"></a-animation>
             <a-animation
              attribute="scale"
              dur="2000"
              from="0.1 0.1 0.1"
              to="1 2 1"
              easing="linear"
              begin="expand">
            </a-animation>
          </a-sphere>
        </a-scene>

        <!-- // javascript -->
        <script>

        var holding = false
          // get matter data/text from lion
          document.querySelector('#lion').addEventListener('mouseenter', function() {
            document.querySelector('#text-3').setAttribute("visible", false)
            document.querySelector('#text-1').setAttribute("visible", true)
          })
          document.querySelector('#text-1').addEventListener('mouseenter', function() {
            $(this).data('timeout', setTimeout(function(){
              document.querySelector('#text-1').setAttribute("visible", false)
              document.querySelector('#text-2').setAttribute("visible", true)
            }, 3000));
          })
          document.querySelector('#text-2').addEventListener('mouseenter', function() {
            $(this).data('timeout', setTimeout(function(){
              document.querySelector('#text-2').setAttribute("visible", false)
              document.querySelector('#text-3').setAttribute("visible", true)
              document.querySelector('#ruby').setAttribute("visible", true)
              allowPickup();
            }, 15000));
          })

            // giving the ruby to the gas
          //   document.querySelector('#ruby').addEventListener( 'mouseenter', function() {
          //
          //     if (holding == false) {
          //       document.querySelector('#text-1').setAttribute("visible", false)
          //       document.querySelector('#hold').setAttribute("visible", true)
          //       document.querySelector('#ruby').setAttribute("visible", false)
          //       holding = true
          //
          //       document.querySelector('#lion').addEventListener( 'mouseenter', function() {
          //         holding = false
          //         document.querySelector('#eight').setAttribute("position", "-2 1.2 1")
          //         document.querySelector('#eight').setAttribute("scale", ".2 .2 .2")
          //         document.querySelector('#eight').setAttribute("visible", true)
          //         document.querySelector('#hold').setAttribute("visible", false)
          //         document.querySelector('#text').setAttribute("text", "value: Great job finishing the pattern! A new portal just opened up, let's go!; align: center; width: 2; wrap-count: 20; color: #333333")
          //         document.querySelector('#text').setAttribute("visible", true)
          //         document.querySelector('#portal').setAttribute('visible', true)
          //         document.querySelector('#portal').emit('expand')
          //       })
          //     }
          //   })
          //
          // }


            document.getElementById('portal').addEventListener('mouseenter', function(event){
              window.open("level5.html", "_self")
            });

        </script>

    </body>
</html>
